function anima(){function w(){return n.options.canvas.getContext&&n.options.canvas.getContext("2d")}function h(n){var t=n>>31;return(n^t)-t}function c(n){n.preventDefault(),f=!0}function l(n){n.preventDefault(),f=!1}function b(t){t.preventDefault(),r.x=t.pageX-n.options.canvas.offsetLeft,r.y=t.pageY-n.options.canvas.offsetTop}function k(t){t.preventDefault(),r.x=t.touches[0].pageX-n.options.canvas.offsetLeft,r.y=t.touches[0].pageY-n.options.canvas.offsetTop}function d(){n.options.canvas=document.createElement("canvas"),n.options.box=document.createElement("div"),n.options.box.className="box",o.appendChild(n.options.canvas),o.appendChild(n.options.box),!w||(i=n.options.canvas.getContext("2d"),window.onresize=function(){n.options.canvas.width=window.innerWidth,n.options.canvas.height=window.innerHeight},"ontouchstart"in window?(document.addEventListener("touchstart",c,!1),document.addEventListener("touchend",l,!1),document.addEventListener("touchmove",k,!1)):(document.addEventListener("mousedown",c,!1),document.addEventListener("mouseup",l,!1),document.addEventListener("mousemove",b,!1))),v()}function v(){for(var t=0,i=n.options.maxParticles;t<i;t++){var r=10+(window.innerWidth||canvas.width)/i*t,u=(window.innerHeight||canvas.height)/2,f=~~(Math.random()*15);n.options.particles.push({x:r,y:u,goalX:r,goalY:u,top:4+Math.random()*-8,bottom:-15+Math.random()*-20,left:-15+Math.random()*-20,right:-5+Math.random()*-10,radius:f,color:n.options.colors[~~(Math.random()*n.options.colors.length)],clear:a})}}function g(){n.options.particles.forEach(function(n){i.save(),i.globalCompositeOperation="lighter",i.fillStyle=n.color,i.beginPath(),i.arc(n.x,n.y,n.radius,0,Math.PI*2),i.closePath(),i.fill(),i.restore()})}function y(){rt(),g(),requestAnimFrame(y)}function nt(n,i,r){t=500,n.goalX=10+i.width/100*r,n.goalY=i.height/2}function tt(n,i){u=f?Math.min(u+5,2e3):Math.max(u-5,0);var o=ut(n,r),e=(u+t)/o;n.x+=Math.cos(i)*e+(n.goalX-n.x)*.08,n.y+=Math.sin(i)*e+(n.goalY-n.y)*.08,it(n)}function it(n){n.radius*=.96,n.radius<=2&&(n.radius=~~(Math.random()*15))}function rt(){for(var i,t=0;t<10;t++)i=function(){};n.currentNode==null&&(n.currentNode=n.nodeTree,n.updateBox(n.currentNode.message),e=+(new Date).getTime()),+(new Date).getTime()-e>n.currentNode.timeout&&(n.currentNode.then(n),n.currentNode=n.currentNode.next?n.currentNode.next:n.nodeTree,e=+(new Date).getTime()),n.options.particles.forEach(function(t,i){t.clear();var u,e,f={};u=Math.atan2(t.y-r.y,t.x-r.x),e=Math.PI*2*i/n.options.particles.length,f.x=(innerWidth||n.options.canvas.width)*.5,f.y=(innerHeight||n.options.canvas.height)*.5,tt(t,u),nt(t,n.options.canvas,i)})}function ut(n,t){var i=h(n.x-t.x),r=h(n.y-t.y);return Math.sqrt(i*i+r*r)}var n=this,i,r={x:-99999,y:-99999},f=!1,u=0,t=500,e=+(new Date).getTime(),p=60,o=document.querySelector("body"),s,a;return this.nodeTree=null,this.addNode=function(t,i,r){if(!n.nodeTree)n.nodeTree=new s(t,i,r);else{for(var u=n.nodeTree;u.next!==!1;)u=n.nodeTree.next;u.next=new s(t,i,r)}return n},s=function(n,t,i){return{message:n,timeout:t,animation:i,next:!1,then:function(){}}},this.then=function(t){if(t=t||function(){},!!n.nodeTree){for(var i=n.nodeTree;i.next!==!1;)i=n.nodeTree.next;i.then=t}return n},this.options={particles:[],canvas:"",box:"",colors:[],audio:"",maxParticles:100},this.setMaxParticles=function(t){n.options.maxParticles=t,v()},this.setSoundtrack=function(t){var i=document.querySelector("audio");return i||(i=document.createElement("audio"),i.removeAttribute("controls"),i.loop=!0,i.volume=.5),o.appendChild(i),i.src=t,n.options.audio=i,n},this.playMusic=function(){var t=document.querySelector("audio");return t.play(),n},this.setParticleColors=function(t){if(n.options.colors=t,n.options.particles.length)for(var i=0;i<n.options.particles.length;i++)n.options.particles[i].color=n.options.colors[~~(Math.random()*n.options.colors.length)];return n},this.setBackgroundColor=function(t,i){t=t||"#B1E5DF",i=i||"#68C0CC",n.options.canvas.width=window.innerWidth,n.options.canvas.height=window.innerHeight;return["","-webkit-","-moz-","-ms-","-o"].forEach(function(r){n.options.canvas.style.background=r+"radial-gradient("+t+", "+i+")"}),n},this.play=function(){return y(),n},this.currentNode=null,this.updateBox=function(t){n.options.box.innerHTML="<p><span>"+t+"<\/span><\/p>"},a=function(){var t=this,n=2*t.radius+4,r=n<<0===n?n:(n<<0)+1,u=t.x-n/2,f=t.y-n/2;i.clearRect(~~u,~~f,r,r)},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/p)}}(),d(),n}function start(){var n=(new anima).setSoundtrack("../audio/danosongs.com-living-the-daydream-instr.mp3").playMusic().setParticleColors(["#553bb2","#eff63a","#e14743"]).addNode("1",2e3,"3").addNode("4",1e3,"6").then(function(n){console.log(n)}).setBackgroundColor("#fff","#eff6e6").play()}window.addEventListener?window.addEventListener("load",start,!1):window.onload=start;
//@ sourceMappingURL=anima.min.js.map